<?php
/**
 * @file
 *
 * Experiments with Drupal forms.
 */

function form_experiments_menu() {
  $items = array();

  $items['form-experiments'] = array(
    'title' => t('Form Experiments'),
    'page callback' => 'form_experiments_view',
    'access callback' => TRUE,
    'type' => MENU_CALLBACK,
  );

  $items['form-experiments/01'] = array(
    'title' => t('Form Experiments 01'),
    'page callback' => 'drupal_get_form',
    'page arguments' => array('form_experiments_01'),
    'access callback' => TRUE,
    'description' => t('Form Experiments 01'),
    'type' => MENU_CALLBACK,
  );

  return $items;
}

function form_experiments_view() {
  return "Hello World";
}

//function form_experiments_fix_duplicate_id($element) {
//  if ($element['#id'] === $element['upload']['#id']) {
//    $element['#id'] = drupal_html_id($element['#id']);
//  }
//  return $element;
//}

function form_experiments_01() {
  $form['#attached']['js'] = array(
    drupal_get_path('module', 'form_experiments') . '/js/form_experiments.js',
  );

  $form['managed_files'] = array(
    '#type' => 'fieldset',
    '#title' => t('Managed Files'),
  );

  $num_docs = 3;
  for ($i = 1; $i <= $num_docs; $i++) {
    $form['managed_files'][$i] = array(
      '#type' => 'managed_file',
      '#title' => 'Managed File ' . $i,
    );
  }

  $form['submit'] = array(
    '#type' => 'submit',
    '#value' => 'Submit',
  );

  return $form;
}
